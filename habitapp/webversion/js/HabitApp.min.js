HabitApp=function(t){this.myImage=null,this.canvas_Result=t.canvas_Result,this.ctx_Result=this.canvas_Result.getContext("2d"),this.coverageResultOutput=t.coverageResultOutput,this.canvas_Original=null,t.canvas_Original?this.canvas_Original=t.canvas_Original:this.canvas_Original=document.createElement("canvas"),this.ctx_Original=this.canvas_Original.getContext("2d"),this.slider=t.slider,this.cutOffValue=t.cutOffValue,this.percentage=0,this.updateCutOff(),this.updatePercentageCover();var e=this;this.slider.addEventListener("change",function(){e.updateCutOff(),e.updateImage()})},HabitApp.prototype={setImage:function(t){var e=this,a=new Image;a.onload=function(){e.canvas_Original.width=a.width,e.canvas_Original.height=a.height,e.canvas_Result.width=a.width,e.canvas_Result.height=a.height,e.ctx_Original.drawImage(a,0,0),e.myImage=a,e.updateImage()},a.src=t},updateCutOff:function(){this.cutOffValue.innerText=this.slider.value},updateImage:function(){if(null!=this.myImage){for(var t=this.ctx_Original.getImageData(0,0,this.myImage.width,this.myImage.height),e=t.data,a=this.slider.value,i=e.length/4,n=0,s=0;s<e.length;s+=4){var h=e[s],u=e[s+1],g=e[s+2];h>a||u>a||g>a?(e[s]=255,e[s+1]=255,e[s+2]=255):(e[s]=0,e[s+1]=0,e[s+2]=0,n++)}this.ctx_Result.putImageData(t,0,0),this.percentage=n/i*100,this.updatePercentageCover()}},updatePercentageCover:function(){this.coverageResultOutput.innerText=Math.round(this.percentage)+"%"}};